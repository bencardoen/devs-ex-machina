%? use paragraphs for layout instead of (dense) flowing text ?
%TODO SIZE: approx. 1-2 column, every TODO is approx. one paragraph
\subsection{DEVS}
%TODO give introduction to the field: DEVS is used for discrete event simulation and is a common basis for most other formalisms
The family of DEVS \cite{DEVSbase} formalisms serve as a common basis for most other discrete event formalisms. Of interest in this paper are the 3 key formalisms: Classic \cite{ClassicDEVS}, Dynamic Structured \cite{DSDEVS} and Parallel \cite{ParallelDEVS} and their implementation. This project uses the Direct Connection \cite{SymbolicFlattening} algorithm, so from a kernel's perspective only Atomic Models exist in the simulation linked to each other by connected ports.

\subsection{Parallel computing}
%TODO parallel computing is necessary with more and more complex systems, blablabla (usual explanation)
Parallel execution of a PDEVS simulation can lower runtime and increase the bound on the state space, thereby enabling simulation of more complex systems in the same time-frame.
While the shared memory parallelism offered by most modern hardware does not increase the state space bounds, it can reduce the runtime and offers more direct communication and control between entities involved in synchronization compared to distributed simulation. \\

\subsection{Motivation}
%TODO give motivation (adevs is good, but only conservative; exploit new parallelism features of C++11 too)
Adevs \cite{adevs} offers a very fast conservative synchronized shared memory DEVS simulator, but no optimistic synchronized variant. 
The latter can be significantly faster, especially in simulations where the runtime behaviour of the simulation is hard to predict. \\
The matured parallelism features of C++11 were used in this project with the dual aim of writing standard-compliant (and thus portable) code without losing access to powerful low-level threading primitives. % may need another pass on this one :(

\subsection{Solution} %for lack of a better word
%TODO give our solution, motivating the need for a different kernel, instead of modifying another kernel (like adevs or PythonPDEVS)
The usage of the Direct connection algorithm makes reusing the adevs kernel hard.
The devs-ex-machina (dxex) kernel follows the design of the PythonPDEVS \cite{PythonPDEVS}(PyPDEVS) kernel where appropriate, but by the very nature of the implementation languages has to differ in key aspects (e.g. memory allocation strategy). 
The core aims of the project are to offer a deterministic simulation kernel where the simulation author is shielded as much as possible from the kernel implementation, without sacrificing performance. As in PyPDEVS, a model need be written only once for use in the different simulation kernels (with the exception of a non-trivial lookahead).\\
The tracing framework from PyPDEVS was ported to allow optional verification of simulations. 
\subsection{Time}
The DEVS formalisms has $\mathbb{R}$ as time base, but any implementation has to decide on an enumerable representation of time. Dxex kernels can operate on IEEE754 floating point time units or integer time. In principle any type with well defined operators can be used as template parameter, but from a performance point of view a type fitting in a machine word offers obvious advantages.%ref to time paper.
An integer representation significantly reduces the possible range of the virtual time, but avoids approximation errors. Furthermore, the notion of $\epsilon$ as a minimum distance between two distinct time points need not to be established. This task is non-trivial for floating point approximations.\\
The select() function, which imposes a sequential ordering between concurrent events, is made implicit in this project by extending time representation with a causality field with a range at least as large as the maximum nr of models in the kernels ($2^{24}$ by default). If A and B are imminent at time t then $t[1]_a < t[1]_b \oplus t[1]_b < t[1]_a$, while $t[0]_a == t[0]_b == t[0]$. This avoids evaluating the select() function on all imminent models, while still maintaining the deterministic order of concurrent transitions.
